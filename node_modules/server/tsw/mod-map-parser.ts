import map from './mod-map';

/**
 * 注意require写在里面是为了能清除缓存
 * @param {String} modAct mod_act字符串
 * @param {IncomingMessage} req
 * @param {ServerResponse} res
 */
export const find = (modAct, req, res) => {
    let logger = plug('logger');
    let mod = map[modAct];

    logger.info(`modAct: ${modAct}, mod=${mod}`);

    if (!mod || !modAct || modAct === '404') {
        modAct = '404';
        req.params.mod_act = modAct;
        mod = map[modAct];
    }

    res.setHeader('Mod-Map', modAct);

    return require(mod);
};
