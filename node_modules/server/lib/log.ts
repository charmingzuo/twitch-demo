import * as path from 'path'
import * as winston from 'winston'
import * as WinstonDailyRotateFile from 'winston-daily-rotate-file'

const transports = [];

if (process.env.NODE_ENV === 'test' ||
    process.env.NODE_ENV === 'production') {

    let logFilePath = path.join(__dirname, '../../../log/run.log');

    transports.push(new WinstonDailyRotateFile({
        filename: logFilePath,
        datePattern: 'yyyy-MM-dd.',
        prepend: true,
        level: 'info'
    }));
}
else {
    transports.push(new (winston.transports.Console)({
        level: 'debug'
    }));
}

export default new (winston.Logger)({
    transports: transports
});
