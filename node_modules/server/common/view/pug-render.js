const pug = require('pug');
const messages = require('../../common/messages');

module.exports = {

    /**
     * 渲染pug文件
     * @param {String} pugFile 模版文件路径，不允许为空且必须唯一
     * @param {Object} data 模版数据
     * @param {Function} cb
     */
    render: (pugFile, data, cb)=>{
        "use strict";

        let logger = plug('logger');

        pug.renderFile(pugFile, {
            //basedir: require('path').join(__dirname, '../../'),
            cache: true,
            pretty: ' ',
            //debug: true,
            data: data
        }, (err, html)=> {
            if (err) {
                logger.error(err.filename + '  ' + err.msg);
                err = messages.ERR_PUG_RENDER_ERROR;
            }
            cb(err, html);
        });
    }
};