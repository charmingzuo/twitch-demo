import {render} from "../../common/json-render";
import Streams from '../../twitch/api/Streams'

const streams = new Streams();

const limit = 20;

export default (session: Session) => {
    let page = session.request.query.page || 1;
    let game = session.request.query.game || '';

    streams.request({
        limit: limit,
        offset: limit * Math.max(page - 1, 1),
        game: game
    }, (err, json) => {
        render(session, json);
    });

};
